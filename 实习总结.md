## 2019.7.30—2019.12.10实习总结

实习总结，需求开发以及项目背景、项目的整体设计、技术成长等方面进行为期小半年的实习总结。

* 需求开发总结及其思考

* 项目背景与设计探索
* 技术收获及思考

### 需求开发总结及其思考

以时间为轴，记录所有大大小小的需求点开发以及思考。涛哥和茂云姐的 review 给了很多启发，也凸显出许多功能考虑不周全的地方。例如：功能的操作边界限定、容错输入、状态管理、切换动画过渡等，这在基础技术学习中完全是没法感知到的。对我而言开发经验是收获的一种，我开始会思考其它功能开发的时候考虑更多的问题，诸如变量、函数对性能、内存等的占用。对我而言这是一个好的开端，对团队而言这却是糟糕的不能开箱即用始终是种非最优。

* 角色管理

  这是进入部门的第一个需求，搞砸了。最后还是茂云姐兜底处理了。角色管理是，任务平台实现权限管理的一个环节。包含有角色的新增、删除、配置、分配到用户等功能，其实我仅仅做了部分的增删改。没有以此为入口了解整个任务平台的权限设计真的是种损失。总结此次搞砸的原因，一是对项目技术欠缺这反映出基础不够扎实以致不能很快上手新的框架开发、二是对需求了解不够经验欠缺。

  反思：技术会用只是第一步，深入原理才是核心。排期一定要压榨出1/3的时间留给自测和检查，总而言之把活尽早干完。

* 调研富文本编辑器（包含表格做灵活拖拽，图片用cdn存储）

* Lean node服务

  这是第二个开发需求，最后是峥哥兜底。lean 服务，因为历史遗留原因后端部分接口没人维护。node层需要缓存自己所需数据，这个数据是通过两个接口数据进行提取比对而生成。因此需要用json文件来保存这个数据，技术上需要解决文件生成、文件始终最新、优化文件读取io、并发问题。并发问题以及io复用是我实现版本没有考虑到的这在峥哥代码中引起我的思考。学会用程序流程图来表示一个功能块的设计，再代码实现。也在代码开发中暴露出了一些技术问题对async、await、promise结合generator理解不正确。

  思考：并发、服务端对一个服务的整体工作原理的探索，理清前后端服务的完整流程。

* 统一任务平台格式

* BI统计产效监控，增加对单个节点上的数据做全产线分析。

  在产效监控下增加对单个点所有数据的柱图展示，第一次写E-chart业务。感觉还不错，挺酷的效果。

* 任务平台，任务管理=》任务调度

  任务调度优化搜索项，简化掉项目名，下发时间。增加联动任务环节以及任务子环节作为过滤条件。同样展示数据做修改。难点主要是处理任务环节拉取前置条件以及任务子环节可选条件。任务环节可来自，任务代码拉去也可以来自任务类型拉去。任务子环节只能在任务环节存在并且单选的状态下才能拉去展示。数据列增加任务轨迹信息展示。

  反思：PM未完整定义交互细节的情况下，测试可能会无限挑战交互细节。前端不应该是交互需求设计调整的点，应该是产品同学定义开发实现。而非测试边测边改需求，要求产品确定交互需求，不接受测试修改需求。

* 任务平台，任务改派

  对于同一产线，为了使任务得到快速作业。增加对作业环节、质检环节、验收环节的任务提供改派功能。根据用户账号或姓名以及任务环节拉去任务列表。改派时需限定同一产线，改派不可改派给自己。

  思考：边输入边拉去人员数据做过滤，增加了防抖。任务调度、任务改派两部分功能并不多被测出39个bug，

  （哈哈，产品19个，后端10个，前端均分10个）FT开发质量。

* 产线配置下，流转标注配置

  流转标注是特殊的标注，在原来的设计逻辑中未作出区分。流转标注有特殊的一级代码，二级选项从列表挑选组成。由于代码是旧平台迁移过来，作业标与质检验收标复用了同一个组件。此时流转标仅仅在作业标下。原组件封装的粒度很大，此时已经不能复用。原代码技术仍然采用axios 请求数据保存在组件state中而当前项目已经采用umi-dva的方式开发。看完原代码后有两种思路，一是重构这部分代码将整个标注管理完全重构组件重新提取封装、二是将原组件复制一遍做局部修改替换作业标引用质检验收标继续用原组件。最后我向生活低头了，工作量3day采用第二种1.5day就ok然后联调自测。最开始我开始重构，发现这部分逻辑及其复杂。我将数据请求迁入service，将数据提到models中，部分组件提取完车。一天过去了，第二天晨会报告进度40%，由于复杂的逻辑、还要加入新功能、并重写质检验收部分剩下的工作量不够继续开发大概需要延期2day。最终向生活低头了，采用第二种方案完事儿。提测前还在做重构思考，后来果断删掉重构部分代码至此向生活完全低头。

  思考：这部分代码是一定需要重构的，一是前同事这部分代码写的逻辑存在部分问题比如：通过if(obj.text1)来判断一级标还是二级标，新增未做重复项拦截，一级标注名可空等。二是设计存在很多漏洞，整体设计还是稍微复杂了。后来的确后悔了，在听了聪哥在代码review上对后端同学设计的评价后，反思了不应该向延期妥协。当然重构需要产品以及测试同学的支持，重构影响到的所有功能需要进行再次测试。

* 产线接入，创建关系废弃（下线）

* 归一化模板载入（新增、复制均需要实现）

* 产线查询，info_id,情报导出增加关联任务可选

* 流式情报条件拆分

* 配置信息版本查看

  需求要求对任务类型、情报展示、情报&任务等主页下，增加统一的支持历史版本配置详情查看。因为数据结构存在重叠区（config_id,version）在三个数据详情页均能获取到。功能完全一致，因此采用插件的方式实现。好处就是，每次都只有唯一的打开，展示的配置内容（json数据）保存在插件中。每个页都传递对应的参数（config_id,version）调用插件models中的请求函数，来拉去数据。

  思考：有部分业务功能，其实可以采用“插件”的方式来解决。传入参数，执行功能或返回处理结果。不依赖外界环境，其实这很类似函数式编程的设计思想。未来这个方向可作深入探索。

* 批次情报状态展示（情报创任务状态监测）

* 升级优化区域内外匹配

## 项目背景以及任务平台设计

实话说任务平台的总体架构还不是很透彻，曾经尝试了解发现数据流不是单向流因此单从系统功能去看很难看懂。曾找过pm了解，被敷衍了给个文档其实没啥用。平台整体架构其实是很复杂的，整个内容部数据生产的流程对我来说充满好奇。参加过聪哥分享的架构（眼睛近视且没配眼镜真的很吃亏）以及转正答辩之前茂云姐解释的内容部数据处理流程，大概对内容部数据如何生产发版。但是每个点拆开都是一个架构设计，要对业务需求讨论中能更好参与应该是需要get到功能整个力体系中承担的价值，目前我参加需求评审，完全是去听功能做在哪儿？要做成啥样？时间多久？这是远远不够的！难道这就是传说中的搬砖。总之吧，对项目设计很不熟悉。这是急需去了解的地方，发现并没有文档能清楚给新来的同学展示出一个平台的架构设计。



## 收获极其思考

。。。

